# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ SaaS-CRM-Dashboard (BeautyFlow)

> –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-01-16

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –°–ª–æ–π              | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                      |
| ----------------- | ----------------------------------------------- |
| **Framework**     | Next.js 16.x (App Router, `"use client"`)       |
| **–Ø–∑—ã–∫**          | TypeScript 5.x                                  |
| **UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** | Radix UI + shadcn/ui                            |
| **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**    | Tailwind CSS 4.x —Å Custom CSS Variables         |
| **–ê–Ω–∏–º–∞—Ü–∏–∏**      | Framer Motion 12.x                              |
| **–ì—Ä–∞—Ñ–∏–∫–∏**       | Recharts 2.x                                    |
| **Backend/DB**    | Supabase (PostgreSQL + REST API)                |
| **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**   | Sonner (react-toast)                            |
| **–§–æ—Ä–º—ã**         | react-hook-form + Zod                           |
| **–î–µ–ø–ª–æ–π**        | Vercel (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞)    |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
Antigravity_Project_2/
‚îú‚îÄ‚îÄ .agent/                  # –ü—Ä–∞–≤–∏–ª–∞ –∏ workflows –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ rules/               # Markdown-–ø—Ä–∞–≤–∏–ª–∞ (senior-dev, git-policy –∏ –¥—Ä.)
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ globals.css          # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx           # RootLayout —Å ThemeProvider
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx             # –ì–ª–∞–≤–Ω–∞—è SPA-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ dialogs/             # –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏ Sheet-—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ add-client-sheet.tsx      # [Deprecated?] –î—É–±–ª–∏—Ä—É–µ—Ç—Å—è client-sheet
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client-sheet.tsx          # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edit-service-dialog.tsx   # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ new-booking-dialog.tsx    # Wizard —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ (3 —à–∞–≥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ views/               # –û—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã (Single Page —Å tabbing)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar-view.tsx         # –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞–ø–∏—Å–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients-view.tsx          # –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard-view.tsx        # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (mock-–¥–∞–Ω–Ω—ã–µ)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services-view.tsx         # –£—Å–ª—É–≥–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings-view.tsx         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏–∑–Ω–µ—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (~55 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ appointment-list.tsx # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?)
‚îÇ   ‚îú‚îÄ‚îÄ bottom-nav.tsx       # –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (—Ç–∞–±—ã)
‚îÇ   ‚îú‚îÄ‚îÄ kpi-cards.tsx        # KPI –∫–∞—Ä—Ç–æ—á–∫–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?)
‚îÇ   ‚îú‚îÄ‚îÄ mobile-header.tsx    # –®–∞–ø–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º, –ø–æ–∏—Å–∫–æ–º, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ theme-provider.tsx   # –û–±—ë—Ä—Ç–∫–∞ next-themes
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.ts        # –•—É–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ viewport
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts         # –•—É–∫ –¥–ª—è —Ç–æ—Å—Ç–æ–≤ (shadcn)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ db.ts                # CRUD —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Supabase (clients, services, appointments, settings)
‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts          # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase –∫–ª–∏–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts             # –£—Ç–∏–ª–∏—Ç–∞ cn() –¥–ª—è className
‚îú‚îÄ‚îÄ public/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –∏–∫–æ–Ω–∫–∏
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îî‚îÄ‚îÄ schema.sql           # DDL —Ç–∞–±–ª–∏—Ü –ë–î + –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ database.ts          # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü Supabase
‚îú‚îÄ‚îÄ DEV_LOG.md               # –ñ—É—Ä–Ω–∞–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ package.json             # npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ tsconfig.json            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
```

---

## –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ù–∞–≤–∏–≥–∞—Ü–∏—è (SPA)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** `app/page.tsx` —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º `activeTab`.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `BottomNav` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ç–∞–±—ã –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç deep linking (URL –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–∞–±–æ–≤).

### 2. –ì–ª–æ–±–∞–ª—å–Ω—ã–π State
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ state-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ (Zustand, Redux).
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π `appointments` –∂–∏–≤—ë—Ç –≤ `page.tsx` –∏ –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –≤ `CalendarView`.
- –ö–ª–∏–µ–Ω—Ç—ã, —É—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ** –≤ –∫–∞–∂–¥–æ–º view.

### 3. –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞—Ç—ã (–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- `CalendarView` ‚Äî `currentDate` (useState)
- `MobileHeader` ‚Äî `currentDate` (useState, –æ—Ç–¥–µ–ª—å–Ω—ã–π!)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

### 4. Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ `lib/db.ts`.
- –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏: RLS –ø–æ–ª–∏—Ç–∏–∫–∏ "Allow all".
- –¢–∞–±–ª–∏—Ü—ã: `clients`, `services`, `appointments`, `settings`.

### 5. –¢–µ–º–∏–∑–∞—Ü–∏—è
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `globals.css` (`--primary`, `--background`, –∏ —Ç.–¥.).
- `ThemeProvider` –æ—Ç `next-themes` –¥–ª—è light/dark.

---

## –°—Ç–µ–π—Ç-–º–∞—à–∏–Ω–∞ UI

```mermaid
stateDiagram-v2
    [*] --> Dashboard
    Dashboard --> Calendar : onViewCalendar
    Dashboard --> Clients : tab switch
    Dashboard --> Services : tab switch
    Dashboard --> Settings : tab switch
    Calendar --> BookingDialog : onNewBooking
    BookingDialog --> Calendar : booking created
```

---

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```mermaid
erDiagram
    CLIENTS {
        UUID id PK
        TEXT name
        TEXT phone
        TEXT email
        TEXT notes
        TEXT status
        INT total_visits
        TIMESTAMPTZ last_visit
        TIMESTAMPTZ created_at
    }
    SERVICES {
        UUID id PK
        TEXT name
        TEXT duration
        DECIMAL price
        TEXT category
        BOOLEAN active
        TIMESTAMPTZ created_at
    }
    APPOINTMENTS {
        UUID id PK
        UUID client_id FK
        UUID service_id FK
        TEXT master_name
        TEXT master_color
        DATE date
        TIME time
        TIME end_time
        TEXT duration
        TEXT status
        TEXT notes
        TIMESTAMPTZ created_at
    }
    SETTINGS {
        UUID id PK
        TEXT salon_name
        TEXT address
        TEXT phone
        TEXT logo_url
        JSONB business_hours
        JSONB notifications
        TIMESTAMPTZ updated_at
    }
    CLIENTS ||--o{ APPOINTMENTS : "has"
    SERVICES ||--o{ APPOINTMENTS : "has"
```

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–æ–ª–≥–∏

| #  | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç               | –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã                                                                 | –¢–∏–ø             |
| -- | ----------------------- | --------------------------------------------------------------------------------- | --------------- |
| 1  | `app/page.tsx`          | TODO: `clientName` –∏ `service` –±–µ—Ä—É—Ç—Å—è –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π                      | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ     |
| 2  | `mobile-header.tsx`     | –ö–Ω–æ–ø–∫–∏ `ChevronLeft/Right` –Ω–µ –∏–º–µ—é—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –¥–∞—Ç–∞ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞        | üü° UI –±–∞–≥       |
| 3  | `calendar-view.tsx`     | `Week` —Ä–µ–∂–∏–º –æ—Ç–∫–ª—é—á—ë–Ω (`disabled={mode === "Week"}`)                              | üü° –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| 4  | `new-booking-dialog.tsx`| TODO: `end_time` –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è (—Å—Ç–∞–≤–∏—Ç—Å—è —Ä–∞–≤–Ω—ã–º `time`)                       | üü° –õ–æ–≥–∏–∫–∞       |
| 5  | `dashboard-view.tsx`    | –í—Å–µ –¥–∞–Ω–Ω—ã–µ ‚Äî Mock, –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Supabase                               | ‚ö™ –ó–∞–≥–ª—É—à–∫–∞     |
| 6  | `services-view.tsx`     | –ö–Ω–æ–ø–∫–∞ "Add Service" –Ω–µ –∏–º–µ–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞                                         | üü° –ö–Ω–æ–ø–∫–∞-–∑–∞–≥–ª—É—à–∫–∞ |
| 7  | `clients-view.tsx`      | –ü—É–Ω–∫—Ç –º–µ–Ω—é "View Profile" ‚Äî –∑–∞–≥–ª—É—à–∫–∞                                              | ‚ö™ –ó–∞–≥–ª—É—à–∫–∞     |
| 8  | `settings-view.tsx`     | –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ ‚Äî –∑–∞–≥–ª—É—à–∫–∞ (toast-—Å–∏–º—É–ª—è—Ü–∏—è)                                    | ‚ö™ –ó–∞–≥–ª—É—à–∫–∞     |
| 9  | `mobile-header.tsx`     | –ö–Ω–æ–ø–∫–∞ `Bell` (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è) ‚Äî –∑–∞–≥–ª—É—à–∫–∞                                            | ‚ö™ –ó–∞–≥–ª—É—à–∫–∞     |
| 10 | –ì–ª–æ–±–∞–ª—å–Ω–æ               | –ù–µ—Ç ESLint –∫–æ–Ω—Ñ–∏–≥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏                                                  | ‚ö™ –ò–Ω—Ñ—Ä–∞        |
| 11 | –ì–ª–æ–±–∞–ª—å–Ω–æ               | –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ (unit/e2e)                                                             | ‚ö™ –ò–Ω—Ñ—Ä–∞        |
| 12 | `add-client-sheet.tsx`  | –î—É–±–ª–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å `client-sheet.tsx` ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã–π –º—ë—Ä—Ç–≤—ã–π –∫–æ–¥             | ‚ö™ Cleanup      |

---

## –õ–µ–≥–µ–Ω–¥–∞ Severity

- üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ UX
- üü° **–í–∞–∂–Ω–æ** ‚Äî –≤–ª–∏—è–µ—Ç –Ω–∞ UX –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚ö™ **–ó–∞–≥–ª—É—à–∫–∞/–ò–Ω—Ñ—Ä–∞** ‚Äî –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ Placeholder

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞—Ç—ã** ‚Äî –ø–æ–¥–Ω—è—Ç—å `currentDate` –≤ `page.tsx`, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ Header –∏ CalendarView.
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ Appointments** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å JOIN-–∑–∞–ø—Ä–æ—Å –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏.
3. **–û–∂–∏–≤–∏—Ç—å Week View** ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è.
4. **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å `end_time`** ‚Äî –ø–∞—Ä—Å–∏—Ç—å `duration` –∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∫ `time`.
5. **Dashboard: —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å mock –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase.
6. **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç** `add-client-sheet.tsx` –µ—Å–ª–∏ –æ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
